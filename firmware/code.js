(()=>{"use strict";var t;!function(t){t[t.POWER=378130479]="POWER",t[t.MINUS=378134559]="MINUS",t[t.PLUS=378132519]="PLUS",t[t.RED=378077439]="RED",t[t.GREEN=378126399]="GREEN",t[t.BLUE=378110079]="BLUE",t[t.CROSS=378114159]="CROSS",t[t.SQUARE=378118239]="SQUARE",t[t.TRIANGLE=378093759]="TRIANGLE",t[t.TOP_LEFT=378097839]="TOP_LEFT",t[t.TOP=378101919]="TOP",t[t.TOP_RIGHT=378099879]="TOP_RIGHT",t[t.LEFT=378081519]="LEFT",t[t.PLAY=378091719]="PLAY",t[t.RIGHT=378116199]="RIGHT",t[t.BOTTOM_LEFT=378083559]="BOTTOM_LEFT",t[t.BOTTOM=378124359]="BOTTOM",t[t.BOTTOM_RIGHT=378085599]="BOTTOM_RIGHT",t[t.X=378089679]="X",t[t.Y=378122319]="Y",t[t.Z=378105999]="Z"}(t||(t={}));var n,e,i=function(t){return function(n){t.mode("input"),setWatch(n,t,{repeat:!0,edge:"both",debounce:10})}},o=function(t,n,e){return n.mode("output"),t.mode("output"),analogWrite(t,0,{freq:e}),function(e){n.write(e>0),analogWrite(t,E.clip(Math.abs(e),0,1),null)}},r=o(P5,P4,100),u=o(P6,P7,100),s={OLED_WIDTH:128,OLED_CHAR:64,OLED_CHUNK:128},c=function(t,n,e){var i=0,o=1,r=null,u=null,s=0;n((function(){s+=o,u&&u(s)&&(i=0,t(0),r&&r())}));var c=null;return function(n){return o=n.direction?1:-1,0===i&&(i=n.startSpeed||.3),u=n.stopCondition,i=Math.min(1,1.05*i),t(i*(e?1:-1)*o),c||(c=new Promise((function(t,n){r=function(){t(s),s=0,c=null,r=null}}))),c}},l=function(){var t=this;this.subscribers=[],this.subscribe=function(n){return t.subscribers.push(n)},this.unsubscribe=function(n){return t.subscribers=t.subscribers.filter((function(t){return t!==n}))},this.publish=function(n){return t.subscribers.forEach((function(t){return t(n)}))}},a={oledReady:new l,irCodes:new l,leftWheelDone:new l,rightWheelDone:new l},f=function(){PrimaryI2C.setup({sda:SDA,scl:SCL});var t=function(t,n,e){var i=new Uint8Array([174,213,128,168,63,211,0,64,141,20,32,0,161,200,218,18,129,207,217,241,219,64,164,166,175]),o=[33,0,s.OLED_WIDTH-1,34,0,7],r=Graphics.createArrayBuffer(s.OLED_WIDTH,i[4]+1,1,{vertical_byte:!0}),u=60;return setTimeout((function(){i.forEach((function(n){t.writeTo(u,[0,n])}))}),50),void 0!==n&&setTimeout(n,100),r.flip=function(){o.forEach((function(n){t.writeTo(u,[0,n])}));var n=new Uint8Array(s.OLED_CHUNK+1);n[0]=s.OLED_CHAR;for(var e=0;e<this.buffer.length;e+=s.OLED_CHUNK)n.set(new Uint8Array(this.buffer,e,s.OLED_CHUNK),1),t.writeTo(u,n)},r.setContrast=function(n){return t.writeTo(u,0,129,n)},r.off=function(){return t.writeTo(u,0,174)},r.on=function(){return t.writeTo(u,0,175)},r}(PrimaryI2C,(function(){return a.oledReady.publish()})),n=i(P10),e=i(P11);!function(t,n){t.mode("input_pullup");var e=0,i=0,o=null,r=function(){0!=e&&(1===e?n(i):(n(e),i=e),e=0)};setWatch((function(t){var n=t.time-t.lastTime;null!==o&&(clearTimeout(o),o=null),n>.04?r():(e=e<<1|+(n>8e-4),o=setTimeout((function(){o=null,r()}),50))}),t,{repeat:!0,edge:"falling"})}(P3,(function(t){return a.irCodes.publish(t)}));var o,l,f=c(r,e,!1),h=c(u,n,!0);return{head:(o=P8,90,.675,2.325,l=function(t,n){switch(n){case"us":t=E.clip(t,675,2325),analogWrite(o,t/1e3/20,{freq:50});break;case"ms":t=E.clip(t,.675,2.325),analogWrite(o,t/20,{freq:50});break;default:t=E.clip(t,0,180),analogWrite(o,.03375+.0004583333333333333*(t-0),{freq:50})}},l(90),l),leftWheel:f,rightWheel:h,oled:t}}(),h={width:128,height:64,bpp:1,buffer:require("heatshrink").decompress(atob("AA0f/ANLgP/AAWAB5N/B4f+BxEPBwYAB+APHBYXgg4ECBwwKCCovgB4s/BAoWB/guGA4wXBMQgXBE4wIGj5HHFAKUEv6aIj6CEFw4wDIAUDVBK2B4CcCU5I6BUQTZLBYc/HxBACFYQzDgIXCj5LEIYQHDUIU/C4YMBCQQnFv43Dv/ADQZjBCgT+EJgMHLwYPIj/gh4PFIgIPEh/wj4GEB5H4EIIvLHoKOEB5BdBOwZvJB4JxBAwYPCDAkB/1/doavHB44AIB6H/B57eDABQPQH75veB4KmDB5S2DVoQADj7fEawIUBB4o6CB4MfB4MDfoR7EFQMH/Ef+BkCKYgGDh/4AIIYCEYIACEwcP+AhBHAQjBAAUPIwQ9BIIIFBn4DCAopdBEohADHwIlCRoJFDCYI0Cj5eCBgYGCeoXwEYIoCFgaQCAYIMBAAI+Cg5SDFYUHB4YXCBYZmDGAQuDPAgzBLgQEBDwZOBdgadFAAY2BXAd/dww+CdAh4BB46GDEoYwGBA55DYAj3FA4QXEDwIXGRoQmENBCcDUQZXHZYQADTgQAGv4ODPggAFVAIACLgqaHUg4A=="))},d=function(t){var e=n[t];e&&e()},B=function(t){n=t,a.irCodes.unsubscribe(d),a.irCodes.subscribe(d)},A=function(){function t(t){this.changed=t,this.seconds=0,this.minutes=0}return t.prototype.tick=function(t){this.seconds+=t,this.seconds>59?(this.seconds=0,this.minutes++):this.seconds<0&&(this.seconds=59,this.minutes--),this.changed(this.toString())},t.prototype.toString=function(){var t=function(t){return t>9?""+t:"0"+t};return t(this.minutes)+":"+t(this.seconds)},t.prototype.startUp=function(){var t=this;this.interval||(this.interval=setInterval((function(){return t.tick(1)}),1e3))},t.prototype.stop=function(){clearInterval(this.interval),this.interval=null},t}(),T=(e=[["Timer",function(){var n;f.oled.setFontVector(40);var e=new A((function(t){f.oled.clear(),f.oled.drawString(t,0,10),f.oled.flip()}));e.startUp(),B(((n={})[t.PLAY]=function(){return e.stop()},n))}],["Marsohod",function(){}],["Else",function(){}]],function(){var n,i=0,o=function(){f.oled.clear();for(var t=0;t<e.length;t++){var n=e[t],o=n[0],r=(n[1],t===i?"> "+o:"  "+o);f.oled.drawString(r,0,20*t)}f.oled.flip()},r=((n={})[t.TOP]=function(){i=Math.max(0,i-1),o()},n[t.BOTTOM]=function(){i=Math.min(e.length-1,i+1),o()},n[t.PLAY]=function(){var t=e[i];t[0],(0,t[1])()},n);o(),B(r)}),C=[],g=null,I=function(t,n){var e=function(){return!0},i=f.leftWheel({direction:t,stopCondition:e}),o=f.rightWheel({direction:n,stopCondition:e});g||(g=Promise.all([i,o])).then((function(t){var n=t[0],e=t[1];C.push([n,e]),g=null}))},p=function(){if(0!==C.length&&!g){var t=C[C.length-1],n=t[0],e=t[1],i=Promise.resolve(0),o=0==n?i:f.leftWheel({direction:n<0,stopCondition:function(t){return t+n==0}}),r=0==e?i:f.rightWheel({direction:e<0,stopCondition:function(t){return t+e==0}});(g=Promise.all([o,r])).then((function(){setTimeout((function(){C.splice(-1,1),g=null,p()}),1e3)}))}},v={},w=!0;v[t.LEFT]=function(){I(!1,!0)},v[t.RIGHT]=function(){I(!0,!1)},v[t.PLUS]=function(){f.head(55)},v[t.MINUS]=function(){f.head(125)},v[t.GREEN]=function(){f.head(90)},v[t.PLAY]=function(){0!=D&&(w||g?(f.oled.setFontVector(15),f.oled.clear(),20==D||f.oled.drawString("=(",0,0),w=!1,f.oled.flip()):p())};var D=0;a.oledReady.subscribe((function(){f.oled&&(f.oled.clear(),f.oled.setFontVector(15),f.oled.drawImage(h,0,0),f.oled.flip()),setTimeout(T,5e3)}))})();